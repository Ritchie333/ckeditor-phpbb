function ytVidId(e){return!!e.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/)&&RegExp.$1}function ytGenIframe(e){return'<iframe src="https://www.youtube.com/embed/'+e+'?wmode=opaque" data-cke-youtube-id="'+e+'" width="560" height="315" frameborder="0"></iframe>'}CKEDITOR.plugins.add("youtube",{lang:["en","bg","pt","pt-br","ja","hu","it","fr","tr","ru","de","ar","nl","pl","vi","zh","el","he","es","nb","nn","fi","et","sk","cs","ko","eu","uk"],icons:"youtube",hidpi:!0,beforeInit:function(e){var t=e.config,u=t.bbcode_bbcodeMap;u.youtube="youtube",CKEDITOR.tools.extend(t,{bbcode_bbcodeMap:u},!0),e.dataProcessor.dataFilter.addRules({elements:{youtube:function(e){if(1===e.children.length){e=ytGenIframe(e.children[0].value);return new CKEDITOR.htmlParser.text(e)}}}}),e.dataProcessor.htmlFilter.addRules({elements:{iframe:function(e){e=e.attributes["data-cke-youtube-id"];if(e)return new CKEDITOR.htmlParser.text("[youtube]"+e+"[/youtube]")}}})},init:function(e){e.addCommand("youtube",new CKEDITOR.dialogCommand("youtube")),e.ui.addButton("Youtube",{label:e.lang.youtube.button,toolbar:"insert",command:"youtube"}),CKEDITOR.dialog.add("youtube",function(t){var u;return{title:e.lang.youtube.title,minWidth:300,minHeight:100,contents:[{id:"youtubePlugin",expand:!0,elements:[{id:"txtUrl",type:"text",label:e.lang.youtube.txtUrl,validate:function(){if(this.isEnabled())return this.getValue()?(u=ytVidId(this.getValue()),0===this.getValue().length||!1===u?(alert(e.lang.youtube.invalidUrl),!1):void 0):(alert(e.lang.youtube.noCode),!1)}}]}],onOk:function(){var e=ytGenIframe(u),e=CKEDITOR.dom.element.createFromHtml(e);t.insertElement(e)}}})}});